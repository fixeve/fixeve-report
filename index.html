<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>レポート</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
    body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial;
        background: #f4f6f8;
        color: #333;
    }

    /* 上部タイトル */
    .header {
        padding: 18px;
        text-align: center;
        font-size: 20px;
        font-weight: 600;
        background: #fff;
        border-bottom: 1px solid #e5e5e5;
    }

    /* 日/週/月/年 切り替え */
    .view-switch {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-top: 15px;
    }
    .view-switch button {
        border: none;
        padding: 6px 18px;
        background: #fff;
        border-radius: 16px;
        font-size: 14px;
        cursor: pointer;
        color: #555;
        border: 1px solid #ddd;
    }
    .view-switch button.active {
        background: #007aff;
        color: #fff;
        border-color: #007aff;
    }

    /* 中央タイトル（4h 0min） */
    .center-info {
        text-align: center;
        margin-top: 10px;
        font-size: 28px;
        font-weight: 600;
    }

    /* 左右矢印 */
    .nav-arrows {
        display: flex;
        justify-content: space-between;
        margin: 10px 30px;
        font-size: 24px;
        color: #999;
        user-select: none;
    }

    /* グラフ全体 */
    .chart-wrapper {
        width: 100%;
        background: #fff;
        margin-top: 10px;
        padding: 20px 0 10px;
        border-top: 1px solid #e5e5e5;
        border-bottom: 1px solid #e5e5e5;
    }
    .chart-container {
        width: 92%;
        height: 460px;   /* ← 大きいグラフ */
        margin: 0 auto;
    }

    /* 1000時間チャレンジ */
    .challenge-box {
        background: #fff;
        margin: 10px 0;
        padding: 20px;
        border-top: 1px solid #e5e5e5;
        border-bottom: 1px solid #e5e5e5;
    }
    .challenge-title {
        font-size: 16px;
        font-weight: 600;
    }
    .challenge-remaining {
        font-size: 26px;
        font-weight: 700;
        margin-top: 6px;
    }
    .start-date {
        margin-top: 10px;
        font-size: 14px;
        color: #777;
    }

</style>
</head>

<body>

<div class="header">振り返る</div>

<!-- 日/週/月/年 -->
<div class="view-switch">
    <button onclick="switchView('day')" id="btn-day" class="active">日</button>
    <button onclick="switchView('week')" id="btn-week">週</button>
    <button onclick="switchView('month')" id="btn-month">月</button>
    <button onclick="switchView('year')" id="btn-year">年</button>
</div>

<!-- 中央タイトル・ナビ -->
<div class="center-info" id="center-title">4 h 0 min</div>
<div class="nav-arrows">
    <div onclick="movePrev()">‹</div>
    <div onclick="moveNext()">›</div>
</div>

<!-- グラフ -->
<div class="chart-wrapper">
    <div class="chart-container">
        <canvas id="reportChart"></canvas>
    </div>
</div>

<!-- 1000時間チャレンジ -->
<div class="challenge-box">
    <div class="challenge-title">1000時間チャレンジ</div>
    <div class="challenge-remaining">残り <span id="remain">996 h 00 min</span></div>
    <div class="start-date">開始日 2025/11/1〜</div>
</div>


<!-- bottom nav -->
<div class="bottom-bar">
    <div>集中する</div>
    <div style="color:#007aff;font-weight:600;">振り返る</div>
    <div>腰を上げる</div>
    <div>コツを知る</div>
    <div>メニュー</div>
</div>

<script>
/* --- グラフ初期描画 --- */
const ctx = document.getElementById("reportChart");
let chart = null;

function drawChart(labels, values) {
    if (chart) chart.destroy();

    chart = new Chart(ctx, {
        type: "bar",
        data: {
            labels: labels,
            datasets: [{
                label: "",
                data: values,
                backgroundColor: "rgba(0,122,255,0.35)",
                borderRadius: 6,
                borderSkipped: false
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: { beginAtZero: true }
            },
            plugins: {
                legend: { display: false }
            }
        }
    });
}

/* --- 各ビューのデータ例 --- */
function switchView(mode) {
    document.querySelectorAll(".view-switch button").forEach(btn => btn.classList.remove("active"));
    document.getElementById("btn-" + mode).classList.add("active");

    if (mode === "day") {
        document.getElementById("center-title").textContent = "4 h 0 min";
        drawChart(["11/11"], [4]);
    }
    if (mode === "week") {
        document.getElementById("center-title").textContent = "4 h 0 min";
        drawChart(["月","火","水","木","金","土","日"], [0,4,0,0,0,0,0]);
    }
    if (mode === "month") {
        document.getElementById("center-title").textContent = "2025年11月\n4 h 0 min";
        drawChart(["1","5","10","11","20","30"], [0,0,0,4,0,0]);
    }
    if (mode === "year") {
        document.getElementById("center-title").textContent = "2025年\n4 h 0 min";
        drawChart(["1月","3月","5月","7月","9月","11月"], [0,0,0,0,0,4]);
    }
}
switchView("day");

function movePrev(){ /* 必要なら後で実装 */ }
function moveNext(){ /* 必要なら後で実装 */ }

</script>
</body>
</html>
